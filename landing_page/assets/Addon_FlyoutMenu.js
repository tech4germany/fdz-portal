/*!
 * Addon FlyoutMenu
 * Author: @dsorge
 * Further changes:
 * Licensed under the MIT license
 */
define("Addon_FlyoutMenu",function(){}),require(["jquery"],function(jQuery){(function(jQuery){if(!jQuery.materna){jQuery.materna={};}jQuery.materna.init_FlyoutMenu=function(el,myFunctionParam,options){var base=this;base.jQueryel=jQuery(el);base.el=el;base.jQueryel.data("materna.init_FlyoutMenu",base);base.init=function(){base.myFunctionParam=myFunctionParam;base.options=jQuery.extend({},jQuery.materna.init_FlyoutMenu.defaultOptions,options);var menu=base.jQueryel;menu.find("li").removeClass("menu-visible").not("li li").attr("tabindex","-1").each(function(){jQuery(this).hover(function(){base.menuToOpen=jQuery(this);if(base.menuIsOpened){clearTimeout(base.timeoutClose);base.closeMenu(base.menuToClose);base.openMenu(base.menuToOpen);}else{base.timeoutOpen=setTimeout(function(){base.menuIsOpened=true;base.openMenu(base.menuToOpen);},base.options.timeToOpen);}},function(){base.menuToClose=jQuery(this);base.timeoutClose=setTimeout(function(){base.menuIsOpened=false;base.closeMenu(base.menuToClose);},base.options.timeToClose);});}).find("li:last").attr("class","last");if(menu.find("li > .mod").length>0){menu.find("li > .mod .menu-box  h4 > a,li > .mod .menu-box  h4 > strong,li > .mod .menu-box  h4 > em").on("mouseenter focus",function(e){if(e.type==="focus"){base.subMenuIsOpened=true;}base.focused=$(this);base.subMenuToOpen=jQuery(this).parent().parent();if(base.subMenuIsOpened){base.subMenuToOpen.siblings().removeClass("menu-visible");base.subMenuToOpen.addClass("menu-visible");}else{base.timeoutOpenSub=setTimeout(function(){if(base.focused.is(":hover")||base.focused.is(":focus")){base.subMenuIsOpened=true;base.subMenuToOpen.siblings().removeClass("menu-visible");base.subMenuToOpen.addClass("menu-visible");}},base.options.timeToOpen);}});menu.find("li > .mod").on("mouseleave",function(e){base.subMenuIsOpened=false;});}menu.find("li strong").attr("tabindex","0");menu.find("li a, li strong").not("li li a").each(function(){jQuery(this).focus(function(){menu.find("li").removeClass("menu-visible");jQuery(this).closest("ul").find(".menu-box").removeClass("visible");jQuery(this).closest("li").addClass("menu-visible").find(".menu-box").addClass("visible");});});menu.find("li:last a").each(function(){jQuery(this).blur(function(){menu.find("li").removeClass("menu-visible").find(".menu-box").removeClass("visible");});});};base.openMenu=function(menuToOpen){if(menuToOpen.find("> .mod").length>0){menuToOpen.find(".menu-box > ul > li").first().addClass("menu-visible");}menuToOpen.addClass("menu-visible").find(".menu-box").addClass("visible");};base.closeMenu=function(menuToClose){menuToClose.removeClass("menu-visible").find(".menu-box").removeClass("visible");menuToClose.closest("ul").find("li").removeClass("menu-visible").end();menuToClose.closest("ul").find(".menu-box").removeClass("visible");};base.init();};jQuery.materna.init_FlyoutMenu.defaultOptions={myDefaultValue:"",timeToOpen:"500",timeToClose:"500"};jQuery.fn.materna_init_FlyoutMenu=function(myFunctionParam,options){return this.each(function(){(new jQuery.materna.init_FlyoutMenu(this,myFunctionParam,options));});};})(jQuery);});